/*! For license information please see main.9208f9c3.chunk.js.LICENSE.txt */
(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{102:function(e,t,a){},106:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),s=a.n(c),r=a(22),l=a.n(r);var i=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,116)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))},o=a(12),u=a.n(o),d=a(19),j=a(6),b=a(10),p=a.n(b),h=(a(102),a(11)),v=a(18),g=a(31),O=a(20),m=a(7);var x=a(16),f=a(24);var y=a(9),N=a(40),C=a(15),S=a(28),I=a(42);a(106);var T=a(58),R=a(36),k=a(57),w=a(27),L=a(54);a.p;a.p;a(110);function E(e){return Object(n.jsxs)(g.a,{variant:"dark",id:"navbar",children:[Object(n.jsx)(g.a.Brand,{href:"#home",children:"Swipe"}),Object(n.jsxs)(O.a,{className:"mr-auto",children:[Object(n.jsx)(O.a.Link,{id:"current-page",children:"Home"}),Object(n.jsx)(O.a.Link,{href:"/about",children:"About"})]}),Object(n.jsxs)(m.a,{inline:!0,id:"language-select",children:[Object(n.jsx)(m.a.Label,{children:"Results' language: "}),Object(n.jsxs)(m.a.Control,{as:"select",size:"sm",id:"languages",value:e.language,onChange:function(t){e.setLanguage(t.target.value),sessionStorage.setItem("language",t.target.value)},children:[Object(n.jsx)("option",{value:"it",children:"Italian"}),Object(n.jsx)("option",{value:"en",children:"English"})]})]})]})}function D(e){var t=Object(c.useState)(e.endpointUrl),a=Object(j.a)(t,2),s=a[0],r=a[1],l=Object(c.useState)({message:"",elementId:"",show:!1}),i=Object(j.a)(l,2),o=i[0],u=i[1];function d(e,t,a){u({message:e,elementId:t,show:!0}),setTimeout((function(){u({message:"",elementId:"",show:!1})}),a)}return Object(n.jsxs)(m.a,{onSubmit:function(t){if(t.preventDefault(),""===s)return alert("Non puoi lasciare questo campo vuoto!"),r(e.endpointUrl),void d("Previous endpoint restored.","reset-msg",5e3);s!==e.endpointUrl?(e.setEndpointUrl(s),d("Enpoint modified successfully!","success-msg",5e3),e.getEndpointTypes(s),sessionStorage.setItem("endpoint",s)):d("The endpoint you insert is the same of the previous","error-msg",5e3)},inline:!0,children:[Object(n.jsxs)(f.a,{children:[Object(n.jsx)(m.a.Label,{children:"Endpoint URL:"}),Object(n.jsx)(m.a.Control,{type:"text",name:"endpoint",placeholder:"Enter endpoint url",value:s,onChange:function(e){r(e.target.value)}}),Object(n.jsx)(f.a.Append,{children:Object(n.jsx)(x.a,{className:"primary-btn",variant:"outline-primary",type:"submit",children:"Apply"})})]}),o.show&&Object(n.jsx)("p",{id:o.elementId,children:o.message})]})}function U(e){var t,a=Object(c.useState)(!1),s=Object(j.a)(a,2),r=s[0],l=s[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),b=o[0],g=o[1],O=Object(c.useState)("rdfs:label"),N=Object(j.a)(O,2),T=N[0],R=N[1],k=Object(c.useState)([]),w=Object(j.a)(k,2),L=w[0],E=w[1],D=Object(c.useState)(),U=Object(j.a)(D,2),A=U[0],B=U[1],P={inline:!0,name:"searchType",type:"radio"};function F(){return(F=Object(d.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setResourcesList([]),l(!0),n=p.a.CancelToken.source(),B(n),t.next=6,p.a.get("/autocomplete_search?query=".concat(a,"&language=").concat(e.language,"&endpoint=").concat(e.endpointUrl,"&resourceType=").concat(e.resourceType?e.resourceType.type.value:""),{cancelToken:n.token}).then((function(e){console.log(e),console.log(e.data),E(e.data),B(null),l(!1)})).catch((function(e){"axios request cancelled"===e.message?console.log("Nuova richiesta ricevuta, questa viene cancellata."):(console.log("Errore nell'autocompletamento della ricerca",e),l(!1))}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var V=function(e){R(e.target.value)};function _(){return(_=Object(d.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),"rdfs:label"!==T){t.next=10;break}return l(!0),E([]),n=p.a.CancelToken.source(),B(n),t.next=8,p.a.get("/search_by_label?query=".concat(b,"&language=").concat(e.language,"&endpoint=").concat(e.endpointUrl,"&resourceType=").concat(e.resourceType?e.resourceType.type.value:""),{cancelToken:n.token}).then((function(t){console.log(t.data),e.setResourcesList(t.data),t.data===[]&&alert("Risorsa con il label inserito non trovata."),l(!1),E(void 0),B(null)})).catch((function(e){"axios request cancelled"===e.message?console.log("Nuova richiesta ricevuta, questa viene cancellata."):(console.log("Errore nell'autocompletamento della ricerca",e),l(!1))}));case 8:t.next=11;break;case 10:e.getResource(b);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var z=L&&Object(n.jsx)("ul",{id:"autocomplete-ul",children:L.map((function(t,a){return Object(n.jsx)("li",{className:"autocomplete-li",onClick:function(){return e.getResource(t.resource.value)},children:Object(n.jsxs)("p",{children:[t.label.value,Object(n.jsx)("span",{children:t.resource.value})]})},a)}))});return Object(n.jsxs)(h.a,{fluid:!0,children:[Object(n.jsxs)(v.a,{className:"justify-content-center mb-2",children:[Object(n.jsx)("span",{style:{marginRight:"1em",textAlign:"center"},children:"Search for:"}),Object(n.jsx)(m.a.Check,Object(y.a)({label:"Label",value:"rdfs:label",checked:"rdfs:label"===T,id:"inline-radio-1",onChange:V},P)),Object(n.jsx)(m.a.Check,Object(y.a)({label:"URI",value:"URI",checked:"URI"===T,id:"inline-radio-2",onChange:V},P))]}),Object(n.jsxs)(v.a,{children:[Object(n.jsxs)(C.a,{md:{span:2,offset:2},sm:12,children:[Object(n.jsxs)(S.a,{style:{float:" left "},children:[Object(n.jsx)(S.a.Toggle,{id:"dropdown-custom-components",children:void 0===e.resourceType?"Any type of resource":e.resourceType.label?e.resourceType.label.value:e.resourceType.type.value}),Object(n.jsx)(S.a.Menu,{as:q,children:null===(t=e.endpointTypes)||void 0===t?void 0:t.map((function(t,a){return Object(n.jsx)(S.a.Item,{onClick:function(){var a;a=t,e.setResourceType(a),console.log(t)},children:t.label?t.label.value:t.type.value},a)}))})]}),e.endpointLoading&&Object(n.jsx)(I.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}),void 0!==e.resourceType&&Object(n.jsx)(x.a,{id:"reset-type-btn",variant:"outline-danger",onClick:function(){return e.setResourceType(void 0)},children:"Reset"})]}),Object(n.jsxs)(C.a,{md:{span:4},xs:12,children:[Object(n.jsx)(m.a,{onSubmit:function(e){return _.apply(this,arguments)},children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(m.a.Control,{type:"text",name:"search",placeholder:"Type your search",autoComplete:"off",autoFocus:!0,onChange:function(e){A&&(console.log("CANCELLATO"),A.cancel("axios request cancelled"),B(null));var t=e.target.value;g(t),0===t.length?(E(null),l(!1)):"URI"!==T&&function(e){F.apply(this,arguments)}(e.target.value)},value:b}),Object(n.jsx)(f.a.Append,{children:Object(n.jsx)(x.a,{className:"primary-btn",variant:"outline-primary",type:"submit",children:"Search"})})]})}),z]}),Object(n.jsx)(C.a,{children:r&&Object(n.jsx)(I.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]})}var q=s.a.forwardRef((function(e,t){var a=e.children,r=e.style,l=e.className,i=e["aria-labelledby"],o=Object(c.useState)(""),u=Object(j.a)(o,2),d=u[0],b=u[1];return Object(n.jsxs)("div",{ref:t,style:r,className:l,"aria-labelledby":i,children:[Object(n.jsx)(N.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return b(e.target.value)},value:d}),Object(n.jsx)("ul",{className:"list-unstyled",children:s.a.Children.toArray(a).filter((function(e){return!d||e.props.children.toLowerCase().includes(d)}))})]})}));function A(e){return Object(n.jsxs)(h.a,{id:"results-container",children:[Object(n.jsxs)("h3",{children:[e.resourcesList.length," Resources:"]}),e.resourcesList.map((function(t){return Object(n.jsxs)(h.a,{className:"results",onClick:function(){return e.getResource(t.resource.value)},children:[Object(n.jsx)("p",{className:"result-title",children:t.label.value}),Object(n.jsxs)("p",{className:"result-url",children:["URI: ",t.resource.value]}),Object(n.jsx)("p",{className:"result-comment",children:t.comment.value||"No comment avaiable for this resource"})]})}))]})}var B=a.p+"static/media/grip.8b88c833.svg";function P(e){var t=Object(c.useState)(e.value.label||e.value.value),a=Object(j.a)(t,2),s=a[0],r=a[1],l=null===e.value.label?null===e.value.datatype?e.value.type:e.value.datatype:"literal";return e.value.editing?Object(n.jsx)("li",{children:Object(n.jsx)(h.a,{fluid:!0,className:"value-container",children:Object(n.jsxs)(v.a,{children:[Object(n.jsxs)(C.a,{children:[Object(n.jsx)(m.a.Control,{type:"text",name:"propertyValue",className:"value",value:s,onChange:function(e){var t=e.target.value;r(t)}}),Object(n.jsxs)(m.a.Text,{muted:!0,children:['This value is type: "',l,'"']})]}),Object(n.jsx)(C.a,{children:Object(n.jsxs)(m.a,{inline:!0,children:[Object(n.jsx)(m.a.Label,{className:"my-1 mr-sm-2 float-sx",children:"Choose the type of comparison:"}),Object(n.jsx)(m.a.Control,{as:"select",className:"my-1 mr-sm-2 float-dx",id:"inlineFormCustomSelectPref",custom:!0,size:"sm",value:e.value.comparison,onChange:function(t){e.value.comparison=t.target.value,e.changeValue(e.value.ID,e.value,void 0)},children:"literal"===l?[Object(n.jsx)("option",{value:"exact-string",children:"Exact String"},"exact-string"),Object(n.jsx)("option",{value:"substring",children:"Substring"},"substring")]:"uri"===l?[Object(n.jsx)("option",{value:"uri",children:"URI"},"uri")]:[Object(n.jsx)("option",{value:"type-based",children:"Type based comparison (default equal)"},"type-based"),Object(n.jsx)("option",{disabled:!0,value:"regex",children:"Regex"},"regex")]})]})}),Object(n.jsx)(C.a,{className:"btn-span",md:"auto",children:Object(n.jsxs)("span",{children:["[",Object(n.jsx)("button",{id:"applica",className:"editButton",onClick:function(){0===s.length?alert("non pu\xf2 essere vuoto"):(e.value.edited=!0,e.value.editing=!1,null!==e.value.label?e.value.label=s:e.value.value=s,e.changeValue(e.value.ID,e.value,!0))},children:"Applica"}),"|",Object(n.jsx)("button",{id:"annulla",className:"editButton",onClick:function(){e.value.editing=!1,e.changeValue(e.value.ID,e.value,void 0)},children:"Annulla"}),"]"]})})]})})}):Object(n.jsxs)("li",{className:e.value.edited?"modified":"non-modified",children:[e.value.label?e.value.label:e.value.value,Object(n.jsxs)("span",{className:"editButtonSpan",children:["[",Object(n.jsx)("button",{className:"editButton",id:"modifica",onClick:function(){e.value.editing=!0,e.changeValue(e.value.ID,e.value,void 0),console.log(e.value)},children:"Edit"}),"]"]}),e.value.edited&&Object(n.jsxs)("span",{className:"editButtonSpan",children:["[",Object(n.jsx)("button",{id:"annulla",className:"editButton",onClick:function(){e.value.edited=!1,e.changeValue(e.value.ID,e.value,!1)},children:"Remove"}),"]"]})]})}function F(e){function t(){if(e.attribute.show=!e.attribute.show,e.attribute.show&&!e.attribute.isConstraint)e.attribute.isConstraint=!0;else if(!e.attribute.show&&e.attribute.isConstraint){var t=e.attribute.value.filter((function(e){return e.edited}));e.attribute.isConstraint=t.length>0}e.changeAttribute(e.attribute.ID,e.attribute)}function a(t,a,n){var c=e.attribute;if(void 0!==n)if(n)c.isConstraint=n;else if(c.show)c.isConstraint=!0;else{var s=c.value.filter((function(e){return e.edited}));c.isConstraint=s.length>0}var r=c.value.findIndex((function(e){return e.ID===t}));c.value[r]=a,e.changeAttribute(e.attribute.ID,c)}return Object(n.jsx)(w.b,{draggableId:e.attribute.ID,index:e.index,children:function(c,s){return Object(n.jsxs)("tr",Object(y.a)(Object(y.a)({},c.draggableProps),{},{ref:c.innerRef,style:Object(y.a)({backgroundColor:s.isDragging&&"#abcdef"},c.draggableProps.style),className:"attribute-row",children:[Object(n.jsx)("td",Object(y.a)(Object(y.a)({className:"drag-cell"},c.dragHandleProps),{},{children:Object(n.jsx)("img",{src:B,alt:"drag"})})),Object(n.jsx)("td",{className:"property-cell",children:e.attribute.property.label||e.attribute.property.uri}),Object(n.jsx)("td",{className:"value-cell",children:Object(n.jsx)("ul",{children:e.attribute.value.map((function(e){return Object(n.jsx)(P,{value:e,changeValue:a},e.ID)}))})}),Object(n.jsx)("td",{className:"show-cell",children:Object(n.jsx)(m.a.Check,{type:"checkbox",name:e.attribute.ID,checked:e.attribute.show,onChange:t})})]}))}})}function V(e){function t(t,a){var n=Object(k.a)(e.resource),c=n.findIndex((function(e){return e.ID===t}));n[c]=a,e.setResource(n)}return Object(n.jsx)(w.a,{onDragEnd:function(t){var a=t.destination,n=t.source;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){var c=e.resource.splice(n.index,1)[0];e.resource.splice(a.index,0,c),console.log(c,a.index)}},children:Object(n.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,id:"resource-table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"drag-cell",children:"#"}),Object(n.jsx)("th",{className:"property-cell",children:"Property"}),Object(n.jsx)("th",{className:"value-cell",children:"Values"}),Object(n.jsx)("th",{className:"show-cell",children:"Show"})]})}),Object(n.jsx)(w.c,{droppableId:"droppable",children:function(a){var c;return Object(n.jsxs)("tbody",Object(y.a)(Object(y.a)({ref:a.innerRef},a.droppableProps),{},{children:[null===(c=e.resource)||void 0===c?void 0:c.map((function(e,a){return Object(n.jsx)(F,{index:a,attribute:e,changeAttribute:t},e.ID)})),a.placeholder]}))}})]})})}function _(e){var t,a=e.resource,c=e.getResource;return Object(n.jsxs)(h.a,{className:"resource-preview",onClick:function(){c(a.uri)},children:[Object(n.jsx)("p",{className:"result-title",children:a.label}),Object(n.jsxs)("p",{className:"result-url",children:["URI: ",a.uri]}),Object(n.jsx)("p",{className:"result-comment",children:a.comment||"No comment avaiable for this resource"}),null===(t=a.attributes)||void 0===t?void 0:t.map((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("hr",{}),Object(n.jsxs)("span",{style:{fontWeight:"500"},children:[e.attribute," :"]}),Object(n.jsx)("ul",{children:e.values.map((function(e){return Object(n.jsx)("li",{children:e})}))})]})}))]})}var z=a.p+"static/media/tail-spin.8e71e38f.svg";function K(){var e=Object(c.useState)(sessionStorage.getItem("language")||"it"),t=Object(j.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(sessionStorage.getItem("endpoint")||"http://dbpedia.org/sparql"),l=Object(j.a)(r,2),i=l[0],o=l[1],b=Object(c.useState)(void 0),g=Object(j.a)(b,2),O=g[0],m=g[1],f=Object(c.useState)(!1),N=Object(j.a)(f,2),C=N[0],S=N[1],I=Object(c.useState)(void 0),k=Object(j.a)(I,2),w=k[0],L=k[1],q=Object(c.useState)(void 0),B=Object(j.a)(q,2),P=B[0],F=B[1],K=Object(c.useState)(void 0),Q=Object(j.a)(K,2),H=Q[0],J=Q[1],M=Object(c.useState)(void 0),W=Object(j.a)(M,2),Y=W[0],G=W[1],X=Object(c.useState)(void 0),Z=Object(j.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)(void 0),ae=Object(j.a)(te,2),ne=ae[0],ce=ae[1],se=Object(c.useState)(void 0),re=Object(j.a)(se,2),le=re[0],ie=re[1],oe=Object(c.useState)("search"),ue=Object(j.a)(oe,2),de=ue[0],je=ue[1],be=Object(c.useState)(!1),pe=Object(j.a)(be,2),he=pe[0],ve=pe[1];function ge(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(void 0),S(!0),e.next=4,p.a.get("/get_types?endpoint=".concat(t)).then((function(e){console.log(e.data),m(e.data)})).catch((function(e){console.log("Errore nel caricamento dei tipi dell'endpoint:"+e)}));case 4:S(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=Object(d.a)(u.a.mark((function e(){var t,n,c,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.map((function(e){return e.property.uri})),console.log(t),console.log(w),n=w?null===w||void 0===w?void 0:w.type.value:"",p.a.post("/save_order",{attributes:t,endpoint:i,resourceType:n}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),ve(!0),c=null===H||void 0===H?void 0:H.map((function(e){return Object(y.a)({},e)})),(s=c.filter((function(e){return Object.assign({},e).isConstraint}))).map((function(e){return e.value=e.value.filter((function(e){return e.edited}))})),console.log(s),ne&&(console.log("CANCELLATO"),ne.cancel("axios request cancelled"),ce(void 0)),r=p.a.CancelToken.source(),ce(r),e.next=15,p.a.post("/query",{endpointUrl:i,language:a,constraints:s},{cancelToken:r.token}).then((function(e){console.log(e.data),ie(e.data),ce(void 0),je("results"),window.scrollTo(0,0)})).catch((function(e){"axios request cancelled"===e.message?console.log("Nuova richiesta ricevuta, questa viene cancellata."):console.log("Errore nell'esecuzione della query.",e)}));case 15:ve(!1);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(!0),J(void 0),G(void 0),ee(void 0),e.next=6,p.a.get("/resource?endpoint=".concat(i,"&language=").concat(a,"&uri=").concat(t)).then((function(e){console.log(e.data),J(e.data.requestedResource),G(e.data.label),ee(e.data.comment),je("resource"),window.scrollTo(0,0)})).catch((function(e){console.log("Errore nella richiesta di una risorsa: "+e)}));case 6:ve(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e=sessionStorage.getItem("language"),t=sessionStorage.getItem("endpoint");e?s(e):sessionStorage.setItem("language","it"),t?o(t):sessionStorage.setItem("endpoint","http://dbpedia.org/sparql"),console.log("RICHIESTA!"),ge(t||"http://dbpedia.org/sparql"),L(void 0)}),[]),Object(n.jsxs)(h.a,{fluid:!0,id:"main-container",children:[he&&Object(n.jsx)("div",{id:"loading",children:Object(n.jsx)("img",{src:z,alt:"Loading..."})}),Object(n.jsx)(E,{language:a,setLanguage:s}),Object(n.jsxs)(T.a,{className:"width-90-centered mt-1",activeKey:de,onSelect:function(e){return je(e)},children:[Object(n.jsxs)(R.a,{eventKey:"search",title:"Search",className:"tab",children:[Object(n.jsx)(v.a,{id:"endpoint-form",children:Object(n.jsx)(D,{endpointUrl:i,setEndpointUrl:o,getEndpointTypes:ge})}),Object(n.jsx)("hr",{}),Object(n.jsx)(U,{language:a,endpointUrl:i,endpointTypes:O,endpointLoading:C,setResourcesList:F,getResource:xe,resourceType:w,setResourceType:L}),(null===P||void 0===P?void 0:P.length)>0&&Object(n.jsx)(A,{resourcesList:P,language:a,endpointUrl:i,getResource:xe})]}),Object(n.jsxs)(R.a,{eventKey:"resource",title:"Resource",className:"tab",disabled:void 0===H,children:[Object(n.jsxs)("div",{className:"width-90-centered mt-2",children:[Object(n.jsx)("h3",{children:Y}),Object(n.jsx)("p",{children:$||"No comment avaiable for this resource"})]}),Object(n.jsx)(V,{resource:H,setResource:J}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsxs)(h.a,{fluid:!0,id:"footer",children:[Object(n.jsx)("p",{children:"Dopo aver modificato gli attributi per effettuare una query clicca il tasto QUERY presente sulla destra"}),Object(n.jsx)(x.a,{variant:"success",size:"lg",onClick:function(){return me.apply(this,arguments)},children:"Run Query"})]})]}),Object(n.jsx)(R.a,{eventKey:"results",title:le?"Query Results (".concat(null===le||void 0===le?void 0:le.length,")"):"Query Results",className:"tab",disabled:void 0===le,children:null===le||void 0===le?void 0:le.map((function(e){return Object(n.jsx)(_,{resource:e,getResource:xe},e.ID)}))})]})]})}l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(K,{})}),document.getElementById("root")),i()}},[[111,1,2]]]);
//# sourceMappingURL=main.9208f9c3.chunk.js.map